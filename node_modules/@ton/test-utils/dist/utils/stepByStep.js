"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.executeFrom = exports.executeTill = void 0;
const transaction_1 = require("../test/transaction");
const node_inspect_extracted_1 = require("node-inspect-extracted");
async function executeTill(txs, match) {
    let executed = [];
    let iterResult = await txs.next();
    let found = false;
    while (!iterResult.done) {
        executed.push(iterResult.value);
        found = (0, transaction_1.compareTransaction)((0, transaction_1.flattenTransaction)(iterResult.value), match);
        if (found) {
            break;
        }
        iterResult = await txs.next();
    }
    if (!found) {
        throw new Error(`Expected ${(0, node_inspect_extracted_1.inspect)(executed.map(x => (0, transaction_1.flattenTransaction)(x)))} to contain a transaction that matches pattern ${(0, node_inspect_extracted_1.inspect)(match)}`);
    }
    return executed;
}
exports.executeTill = executeTill;
async function executeFrom(txs) {
    let executed = [];
    let iterResult = await txs.next();
    while (!iterResult.done) {
        executed.push(iterResult.value);
        iterResult = await txs.next();
    }
    return executed;
}
exports.executeFrom = executeFrom;
