!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e((n||self).reactTelegramWebApp={},n.react)}(this,function(n,e){function t(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var u,o=/*#__PURE__*/t(e),l="undefined"!=typeof window&&null!=(u=window)&&null!=(u=u.Telegram)&&u.WebApp?window.Telegram.WebApp:null,r=e.createContext(l),i={smoothButtonsTransition:!1,smoothButtonsTransitionMs:10},c=e.createContext(i),a=function(){return{MainButton:{current:null},BackButton:{current:null}}},f=e.createContext({MainButton:{current:null},BackButton:{current:null}}),s=function(){},d=function(n){var t=n.id,u=n.show,o=void 0===u?s:u,l=n.hide,r=void 0===l?s:l,i=n.currentShowedIdRef,a=e.useContext(c),f=a.smoothButtonsTransition,d=a.smoothButtonsTransitionMs;e.useEffect(function(){return o(),i.current=t,function(){f?(i.current=null,setTimeout(function(){i.current||r()},d)):(r(),i.current=null)}},[r,t,i,o,f,d])},p=function(){return e.useContext(r)};function v(){return v=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var u in t)Object.prototype.hasOwnProperty.call(t,u)&&(n[u]=t[u])}return n},v.apply(this,arguments)}n.BackButton=function(n){var t=n.onClick,u=e.useContext(f),o=e.useId(),l=p(),r=null==l?void 0:l.BackButton;return e.useEffect(function(){if(t&&r)return r.onClick(t),function(){r.offClick(t)}},[t,r]),d({show:null==r?void 0:r.show,hide:null==r?void 0:r.hide,currentShowedIdRef:u.BackButton,id:o}),null},n.MainButton=function(n){var t=n.text,u=void 0===t?"CONTINUE":t,o=n.progress,l=void 0!==o&&o,r=n.disable,i=n.disabled,c=void 0!==i&&i,a=n.color,s=n.textColor,v=n.onClick,h=e.useContext(f),m=e.useId(),b=p(),w=null==b?void 0:b.MainButton,C=null==b?void 0:b.themeParams,B=r||c;return e.useEffect(function(){null==w||w.setParams({color:a||(null==C?void 0:C.button_color)||"#fff"})},[a,C,w]),e.useEffect(function(){null==w||w.setParams({text_color:s||(null==C?void 0:C.button_text_color)||"#000"})},[w,C,s]),e.useEffect(function(){null==w||w.setText(u)},[u,w]),e.useEffect(function(){B?null==w||w.disable():B||null==w||w.enable()},[B,w]),e.useEffect(function(){l?null==w||w.showProgress(!1):l||null==w||w.hideProgress()},[l,w]),e.useEffect(function(){if(v)return null==w||w.onClick(v),function(){null==w||w.offClick(v)}},[v,w]),d({show:null==w?void 0:w.show,hide:null==w?void 0:w.hide,currentShowedIdRef:h.MainButton,id:m}),null},n.WebAppProvider=function(n){var t=n.children,u=n.options,s=e.useMemo(function(){return v({},i,u)},[u]),d=e.useMemo(a,[]);return e.useEffect(function(){if(null!=u&&u.smoothButtonsTransition){var n=function(){var n,e;null==l||null==(n=l.MainButton)||n.hide(),null==l||null==(e=l.BackButton)||e.hide()};return window.addEventListener("beforeunload",n),function(){return window.removeEventListener("beforeunload",n)}}},[null==u?void 0:u.smoothButtonsTransition]),o.default.createElement(f.Provider,{value:d},o.default.createElement(r.Provider,{value:l},o.default.createElement(c.Provider,{value:s},t)))},n.useExpand=function(){var n=p(),t=e.useState(null==n?void 0:n.isExpanded),u=t[0],o=t[1];return e.useEffect(function(){if(n){var e=function(e){e.isStateStable&&o(n.isExpanded)};return n.onEvent("viewportChanged",e),function(){return n.offEvent("viewportChanged",e)}}},[n]),[u,e.useCallback(function(){return null==n||null==n.expand?void 0:n.expand()},[n])]},n.useHapticFeedback=function(){var n=p(),t=null==n?void 0:n.HapticFeedback,u=e.useCallback(function(){return null==t?void 0:t.impactOccurred.apply(t,[].slice.call(arguments))},[t]),o=e.useCallback(function(){return null==t?void 0:t.notificationOccurred.apply(t,[].slice.call(arguments))},[t]),l=e.useCallback(function(){return null==t?void 0:t.selectionChanged.apply(t,[].slice.call(arguments))},[t]);return[u,o,l]},n.useReadTextFromClipboard=function(){var n=p();return e.useCallback(function(){return new Promise(function(e){null==n||null==n.readTextFromClipboard||n.readTextFromClipboard(e)})},[n])},n.useScanQrPopup=function(){var n=p(),t=e.useCallback(function(){return null==n||null==n.showScanQrPopup?void 0:n.showScanQrPopup.apply(n,[].slice.call(arguments))},[n]);return[t,e.useCallback(function(){return null==n||null==n.closeScanQrPopup?void 0:n.closeScanQrPopup()},[n])]},n.useShowPopup=function(){var n=p();return e.useCallback(function(e){return new Promise(function(t,u){try{null==n||null==n.showPopup||n.showPopup(e,function(n){t(n)})}catch(n){u(n)}})},[n])},n.useSwitchInlineQuery=function(){var n=p();return e.useCallback(function(){return null==n||null==n.switchInlineQuery?void 0:n.switchInlineQuery.apply(n,[].slice.call(arguments))},[n])},n.useThemeParams=function(){var n=p(),t=e.useState(null==n?void 0:n.colorScheme),u=t[0],o=t[1],l=e.useState((null==n?void 0:n.themeParams)||{}),r=l[0],i=l[1];return e.useEffect(function(){if(n){var e=function(){o(n.colorScheme),i(n.themeParams)};return n.onEvent("themeChanged",e),function(){n.offEvent("themeChanged",e)}}},[n]),[u,r]}});
